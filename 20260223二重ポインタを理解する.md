# 目的

2重ポインタの構造を理解する。

# 検証

```
C:¥Documents and Settings¥test¥ctest>nijuptr
a    = 10
*p   = 10
**pp = 10
&a   = 0012FF88
p    = 0012FF88
&p   = 0012FF84
pp   = 0012FF84
&pp  = 0012FF80

*pp  = 0012FF88
**pp  = 10
```

スタックの分布は以下の通り
| 変数名 | 型 | 自身のアドレス | スタック位置 | 値（格納内容） | 指している先 |
|--------|----|---------------|------------|---------------|-------------|
| a | int | 0012FF88 | [ebp-4] | 10 | - |
| p | int* | 0012FF84 | [ebp-8] | 0012FF88 | a |
| pp | int** | 0012FF80 | [ebp-12] | 0012FF84 | p |

```nijuptr.c
#include<stdio.h>

void main(){
 int a   = 10;
 int *p  = &a;
 int **pp = &p;
 
 printf("a    = %d¥n",a);
 printf("*p   = %d¥n",*p);
 printf("**pp = %d¥n",**pp);

 printf("&a   = %p¥n",(void*)&a);
 printf("p    = %p¥n",(void*)p);
 printf("&p   = %p¥n",(void*)&p);
 printf("pp   = %p¥n",(void*)pp);
 printf("&pp  = %p¥n",(void*)&pp);

 printf("¥n");
 printf("*pp  = %p¥n",(void*)*pp); 
 printf("**pp  = %d¥n",**pp);
}
```


```nijuptr.asm
	.386p
	model flat
	ifndef	??version
	?debug	macro
	endm
	endif
	?debug	S "nijuptr.c"
	?debug	T "nijuptr.c"
_TEXT	segment dword public use32 'CODE'
_TEXT	ends
_DATA	segment dword public use32 'DATA'
_DATA	ends
_BSS	segment dword public use32 'BSS'
_BSS	ends
DGROUP	group	_BSS,_DATA
_TEXT	segment dword public use32 'CODE'
_main	proc	near
?live1@0:
   ;	
   ;	void main(){
   ;	
	push      ebp
	mov       ebp,esp
	add       esp,-12
	push      ebx
	mov       ebx,offset s@
   ;	
   ;	 int a   = 10;
   ;	
?live1@16: ; EBX = &s@
@1:
	mov       dword ptr [ebp-4],10
   ;	
   ;	 int *p  = &a;
   ;	
	lea       eax,dword ptr [ebp-4]
	mov       dword ptr [ebp-8],eax
   ;	
   ;	 int **pp = &p;
   ;	
	lea       edx,dword ptr [ebp-8]
	mov       dword ptr [ebp-12],edx
   ;	
   ;	 
   ;	 printf("a    = %d¥n",a);
   ;	
	push      dword ptr [ebp-4]
	push      ebx
	call      _printf
	add       esp,8
   ;	
   ;	 printf("*p   = %d¥n",*p);
   ;	
	mov       ecx,dword ptr [ebp-8]
	push      dword ptr [ecx]
	lea       eax,dword ptr [ebx+11]
	push      eax
	call      _printf
	add       esp,8
   ;	
   ;	 printf("**pp = %d¥n",**pp);
   ;	
	mov       edx,dword ptr [ebp-12]
	mov       ecx,dword ptr [edx]
	push      dword ptr [ecx]
	lea       eax,dword ptr [ebx+22]
	push      eax
	call      _printf
	add       esp,8
   ;	
   ;	
   ;	 printf("&a   = %p¥n",(void*)&a);
   ;	
	lea       edx,dword ptr [ebp-4]
	push      edx
	lea       ecx,dword ptr [ebx+33]
	push      ecx
	call      _printf
	add       esp,8
   ;	
   ;	 printf("p    = %p¥n",(void*)p);
   ;	
	push      dword ptr [ebp-8]
	lea       eax,dword ptr [ebx+44]
	push      eax
	call      _printf
	add       esp,8
   ;	
   ;	 printf("&p   = %p¥n",(void*)&p);
   ;	
	lea       edx,dword ptr [ebp-8]
	push      edx
	lea       ecx,dword ptr [ebx+55]
	push      ecx
	call      _printf
	add       esp,8
   ;	
   ;	 printf("pp   = %p¥n",(void*)pp);
   ;	
	push      dword ptr [ebp-12]
	lea       eax,dword ptr [ebx+66]
	push      eax
	call      _printf
	add       esp,8
   ;	
   ;	 printf("&pp  = %p¥n",(void*)&pp);
   ;	
	lea       edx,dword ptr [ebp-12]
	push      edx
	lea       ecx,dword ptr [ebx+77]
	push      ecx
	call      _printf
	add       esp,8
   ;	
   ;	
   ;	 printf("¥n");
   ;	
	lea       eax,dword ptr [ebx+88]
	push      eax
	call      _printf
	pop       ecx
   ;	
   ;	 printf("*pp  = %p¥n",(void*)*pp); 
   ;	
	mov       edx,dword ptr [ebp-12]
	push      dword ptr [edx]
	lea       ecx,dword ptr [ebx+90]
	push      ecx
	call      _printf
	add       esp,8
   ;	
   ;	 printf("**pp  = %d¥n",**pp);
   ;	
	mov       eax,dword ptr [ebp-12]
	mov       edx,dword ptr [eax]
	push      dword ptr [edx]
	lea       ecx,dword ptr [ebx+101]
	push      ecx
	call      _printf
	add       esp,8
   ;	
   ;	}
   ;	
?live1@240: ; 
@2:
	pop       ebx
	mov       esp,ebp
	pop       ebp
	ret 
_main	endp
_TEXT	ends
_DATA	segment dword public use32 'DATA'
s@	label	byte
	;	s@+0:
	db	"a    = %d",10,0
	;	s@+11:
	db	"*p   = %d",10,0
	;	s@+22:
	db	"**pp = %d",10,0
	;	s@+33:
	db	"&a   = %p",10,0
	;	s@+44:
	db	"p    = %p",10,0
	;	s@+55:
	db	"&p   = %p",10,0
	;	s@+66:
	db	"pp   = %p",10,0
	;	s@+77:
	db	"&pp  = %p",10,0,10,0
	;	s@+90:
	db	"*pp  = %p",10,0
	;	s@+101:
	db	"**pp  = %d",10,0
	align	4
_DATA	ends
_TEXT	segment dword public use32 'CODE'
_TEXT	ends
	public	_main
	extrn	_printf:near
	?debug	D "C:¥BC5¥INCLUDE¥_null.h" 8825 10304
	?debug	D "C:¥BC5¥INCLUDE¥_nfile.h" 8825 10304
	?debug	D "C:¥BC5¥INCLUDE¥_defs.h" 8825 10304
	?debug	D "C:¥BC5¥INCLUDE¥stdio.h" 8825 10304
	?debug	D "nijuptr.c" 23639 23068
	end
```
<img width="1920" height="1080" alt="截图 2026-02-23 11-46-29" src="https://github.com/user-attachments/assets/b505cb4e-8806-4bd9-8e4c-06c8b4bb1455" />


